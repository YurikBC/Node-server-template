!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t){e.exports='<div>\n    <h3>Page 3</h3>\n    <div data-item="button">new button</div>\n</div>'},function(e,t){e.exports='<div>\n    <h3>Page 2</h3>\n    <input data-item="form" type="text">\n    <div data-item="formValue" ></div>\n</div>'},function(e,t){e.exports='<div>\n    <h3>Registration page</h3>\n    <div>\n        <input data-item="form__email" type="email">\n        <input data-item="form__password" type="password">\n    </div>\n    <div data-item="button">Submit</div>\n</div>'},function(e,t){e.exports='<div>\n    <h3>Login page</h3>\n    <div>\n        <input data-item="form__email" type="email">\n        <input data-item="form__password" type="password">\n    </div>\n    <div data-item="button">Submit</div>\n</div>'},function(e,t,n){"use strict";n.r(t);let o={};const r=new class{emit(e,t){(o[e]||[]).forEach(e=>{e(t),console.log(e)})}on(e,t){o[e]||(o[e]=[]),o[e].push(t)}off(e){delete o[e]}};let a={};function i(e){let t=e;return"string"==typeof e&&(t=a[e]),t}var d={start(e){const t=Symbol();let n="function"==typeof e.init?e.init():{};return r.on(t,function([t,o]){n=e[t](n,o)||n,console.log(n)}),a[e.name]=t,t},send(e,t){r.emit(i(e),t)},end(e){r.off(i(e))}},s=n(3),c=n.n(s),l=n(2),u=n.n(l),m=n(1),p=n.n(m),v=n(0),f=n.n(v);const R={};var _={name:"loginPageActor",init(){return R.button=document.querySelector('[data-item="button"]'),R.emailForm=document.querySelector('[data-item="form__email"]'),R.passwordForm=document.querySelector('[data-item="form__password"]'),R.button.addEventListener("click",()=>{this.post(R)}),R},count(e){let t=new XMLHttpRequest;t.open("GET","/api/user",!1),t.onreadystatechange=function(){console.log(t.response),console.log("dfvdfv")},t.send()},post(e){let t=e.emailForm.value,n=e.passwordForm.value,o=new XMLHttpRequest,r=`email=${t}&password=${n}`;o.open("POST","/api/user",!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(r),o.onload=(()=>{let e=JSON.parse(o.response);sessionStorage.setItem("token",e.token)})}};const A={};var E={name:"regPageActor",init(){return A.button=document.querySelector('[data-item="button"]'),A.emailForm=document.querySelector('[data-item="form__email"]'),A.passwordForm=document.querySelector('[data-item="form__password"]'),A.button.addEventListener("click",()=>{this.post(A)}),A},count(e){let t=new XMLHttpRequest;t.open("GET","/api/user",!1),t.onreadystatechange=function(){console.log(t.response),console.log("dfvdfv")},t.send()},post(e){let t=e.emailForm.value,n=e.passwordForm.value,o=new XMLHttpRequest,r=`email=${t}&password=${n}`;o.open("POST","/api/user",!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(r),o.onload=(()=>{let e=JSON.parse(o.response);sessionStorage.setItem("token",e.token)})}};let T={};var g={name:"secondPageActor",init(){T.form=document.querySelector('[data-item="form"]'),T.formValue=document.querySelector('[data-item="formValue"]'),T.form.addEventListener("input",()=>{d.send(this.name,["validateForm"])})},validateForm(){T.formValue.innerText=T.form.value}};var O={name:"thirdPageActor",init(){let e=document.querySelector('[data-item="button"]');return e.addEventListener("click",()=>{d.send("thirdPageActor",["triggerAlert",event])}),{button:e}},triggerAlert(e,t){console.log(e,t)}};var S={ROUTER_ACTOR:"routerActor",RENDER_ACTOR:"renderActor",USER_ACTOR:"userActor",SERVER_ACTOR:"serverActor",FIRST_PAGE_ACTOR:"firstPageActor",SECOND_PAGE_ACTOR:"secondPageActor",THIRD_PAGE_ACTOR:"thirdPageActor",LOGIN:"Login",REGISTRATION:"Registration",SECOND_PAGE:"SecondPage",THIRD_PAGE:"thirdPage",LOGIN_URL:"login",REGISTRATION_URL:"registration",SECOND_PAGE_URL:2,THIRD_PAGE_URL:3,TOKEN_NAME_IN_STORAGE:"token"};const{LOGIN:h,REGISTRATION:w,SECOND_PAGE:P,THIRD_PAGE:y,LOGIN_URL:C,REGISTRATION_URL:L,SECOND_PAGE_URL:G,THIRD_PAGE_URL:I}=S;var N=[{name:h,address:C,template:c.a,controller:_},{name:w,address:L,template:u.a,controller:E},{name:P,address:G,template:p.a,controller:g},{name:y,address:I,template:f.a,controller:O}];const{USER_ACTOR:b}=S,k=Symbol("onHashChange");var q={name:"routerActor",init(){return window.addEventListener("hashchange",this[k]),this[k](),{}},go(e,t){window.location.hash=t.address},[k](){let e=(e=>e.filter(e=>window.location.hash.replace("#","")===e.address))(N),t=e.length?e[0]:N[0];d.send(b,["checkToken"]);d.send("renderActor",["paint",t]),(new Q).create(t.controller.name)}};var D={name:"renderActor",init:()=>({mainEl:document.getElementById("a-app")}),paint(e,t){e.mainEl&&(e.mainEl.innerHTML=t.template)}};const{USER_ACTOR:U,TOKEN_NAME_IN_STORAGE:x}=S;var H={name:U,init:()=>({}),checkToken:e=>"fvjdfvnjdfnvjkdfvkjd",checkTokens(e){alert("f"),Promise(resolve).resolve("fdvdfvdf")}};var F={name:"serverActor",init:()=>({})};const{ROUTER_ACTOR:M,RENDER_ACTOR:j,USER_ACTOR:V,SERVER_ACTOR:X,FIRST_PAGE_ACTOR:$,SECOND_PAGE_ACTOR:B,THIRD_PAGE_ACTOR:J}=S;var K={[M]:q,[j]:D,[V]:H,[X]:F,[$]:_,[B]:g,[J]:O};function z(){}z.prototype={constructor:z,create(e){if(K[e]){let t=K[e];return d.start(t)}},remove(e){let t=K[e].name;return d.end(t)}};var Q=z;const{USER_ACTOR:W}=S;let Y;document.addEventListener("DOMContentLoaded",()=>{(Y=new Q).create("serverActor"),Y.create([W]),Y.create("renderActor"),Y.create("routerActor"),function(){let e=[...document.getElementById("nav").children];for(let t in e)e[t].addEventListener("click",e=>{d.send("routerActor",["go",N[+e.target.innerText-1]])})}()}),window.onbeforeunload=(()=>{Y.remove("renderActor"),Y.remove("routerActor")})}]);